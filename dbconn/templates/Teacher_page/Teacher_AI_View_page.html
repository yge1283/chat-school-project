
<!DOCTYPE html>
<html>
<head>
    <title>문제 표시</title>

 
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">


    <link href="https://getbootstrap.com/docs/5.3/assets/css/docs.css" rel="stylesheet">
    
    <link rel="stylesheet" href="{{ url_for('static', filename='./css/Ai_view.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='./css/Style.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Jua&display=swap" rel="stylesheet">
</head>
<style>
    #hiddenDiv {
    display: none;
}
body {
    font-family: "Jua", sans-serif;
        font-weight: 400;
        font-style: normal;
        font-size: 1.2rem;
}




</style>


    
     
<body>


    <header class="p-3 mb-3 border-bottom gradient-background">
        <div class="d-flex flex-wrap align-items-center justify-content-center justify-content-lg-start">
            <a href="/"
                class="d-flex align-items-center mb-2 mb-lg-0 link-body-emphasis text-decoration-none">
                <svg class="bi me-2" width="40" height="32" role="img" aria-label="Bootstrap">
                    <use xlink:href="#bootstrap"></use>
                </svg>
            </a>

            <ul class="nav col-12 col-lg-auto me-lg-auto mb-2 justify-content-center mb-md-0">
                <nav class="navbar navbar-light" aria-label="light offcanvas navbar">
                    <div class="container-fluid">
                        <button class="navbar-toggler" type="button" data-bs-toggle="offcanvas"
                            data-bs-target="#offcanvasNavbar" aria-controls="offcanvasNavbar"
                            aria-label="Toggle navigation">
                            <span class="navbar-toggler-icon"></span>
                        </button>
                        <div class="offcanvas offcanvas-start text-bg-dark" tabindex="-1"
                            id="offcanvasNavbar" aria-labelledby="offcanvasNavbarLabel">
                            <div class="offcanvas-header">
                                <h5 class="offcanvas-title" id="offcanvasNavbarLabel">이전 과제 문제 (날짜 빠른순이 위로)
                                </h5>
                                <button type="button" class="btn-close btn-close-white"
                                    data-bs-dismiss="offcanvas" aria-label="Close"></button>
                            </div>
                            <div class="offcanvas-body" style="background-color: white;">
                                <ul class="navbar-nav justify-content-end flex-grow-1 pe-3">
                                    <li class="nav-item">
                                        <a class="nav-link active" aria-current="page" href="#">1.이전 과제 문제
                                        </a>
                                    </li>
                                </ul>
                                <ul class="navbar-nav justify-content-end flex-grow-1 pe-3">
                                    <li class="nav-item">
                                        <a class="nav-link active" aria-current="page" href="#">2.이전 과제 문제
                                        </a>
                                    </li>
                                </ul>
                                <ul class="navbar-nav justify-content-end flex-grow-1 pe-3">
                                    <li class="nav-item">
                                        <a class="nav-link active" aria-current="page" href="#">3.이전 과제 문제
                                        </a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </nav>
            
            <li><a class="nav-link px-3 link-body-emphasis" href="{{ url_for('teacher_main.show_teacher_DashboardPage') }}">홈</a></li>

            <div class="dropdown text-end">                            
              <a href="#" class="nav-link link-body-emphasis text-decoration-none dropdown-toggle"
                  data-bs-toggle="dropdown" aria-expanded="false">과제
              </a>
              <ul class="dropdown-menu" data-bs-popper="static">
                    <li><a class="dropdown-item" href="{{ url_for('teacher_main.show_teacher_homeworkPage') }}">과제 확인</a></li>
                    <li><a class="dropdown-item" href="{{ url_for('teacher_main.show_teacher_homeworkMakeWithAIPage') }}">AI 문제 생성</a></li>
              </ul>
            </div>

            <li><a class="nav-link px-3 link-body-emphasis" href="{{ url_for('teacher_main.show_teacher_questionPage') }}">질문 게시판</a></li>
            <li><a class="nav-link px-3 link-body-emphasis" href="{{ url_for('teacher_main.show_student_mind') }}">감정 분석</a></li>
            <div class="dropdown text-end">
                <a href="#" class="nav-link link-body-emphasis text-decoration-none dropdown-toggle"
                    data-bs-toggle="dropdown" aria-expanded="false">기타사항
                </a>
                <ul class="dropdown-menu" data-bs-popper="static">
                    <li><a class="dropdown-item" href="#">오늘의 학습</a></li>
                    <li><a class="dropdown-item" href="#">파일 올리기</a></li>
                    <li><a class="nav-link px-3 link-body-emphasis" href="{{ url_for('teacher_main.show_teacher_memoPage') }}">메모장</a></li>
                </ul>
            </div>
        </ul>

        <ul class="nav navbar-nav navbar-right">
            <li><a href="#" class="px-3">로그아웃</a></li>
        </ul>

         <!-- 프로필 버튼 -->
        <div class="dropdown text-end">
            <a href="#" class="d-block link-body-emphasis text-decoration-none" data-bs-toggle="offcanvas" data-bs-target="#profileOffcanvas" aria-controls="profileOffcanvas"> <!-- 오프캔버스를 열도록 설정 -->
                <img src="https://github.com/mdo.png" alt="프로필 이미지" width="32" height="32"
                    class="rounded-circle">
            </a>
        </div>
        
        <!-- 프로필 오프캔버스 -->
        <div class="offcanvas offcanvas-end" tabindex="-1" id="profileOffcanvas" aria-labelledby="profileOffcanvasLabel"> <!-- 오른쪽 오프캔버스 -->
            <div class="offcanvas-header">
                <h5 id="profileOffcanvasLabel">프로필</h5>
                <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button> <!-- 닫기 버튼 -->
            </div>
            <div class="offcanvas-body"> <!-- 오프캔버스 내용 -->
                <p>프로필 정보가 여기에 표시됩니다.</p> <!-- 예시 내용 -->
            </div>
        </div>
    </div>
</header>

    <div class="container mt-3"> <!-- 메인 컨테이너 -->
        <div class="row justify-content-center"> <!-- 행 중앙 정렬 -->
            <div class="col-sm-10"> <!-- 추가 콘텐츠 영역 -->                   
                <div class="container mt-3 mb-4"> <!-- 메인 컨테이너 -->
                    <div class="row"> <!-- 행 시작 -->
                        <div class="col-sm-12 d-flex justify-content-end align-items-center"> <!-- 우측 정렬 -->
                            <div class="col-sm-12 d-flex justify-content-end align-items-center"> <!-- 우측 정렬 -->
                               
                            </div> 
                        </div>     
                    </div>
                </div>
                                   
               
</div>

    <div class="button_container">
    
        <div class="left-buttons">
      
          <div class="button">
          
           객관식 : <span>N</span>문제
          
          </div>
      
          <div class="button">
             주관식 : <span>N</span>문제
          
          </div>
      
      
        </div>
      
      
        <div class="right-buttons">
      
          

          <div class="dropdown">
            <button id="writeButton" type="button" class="btn btn-outline-dark button"
            >+</button>
            <div class="dropdown-content">
              <a href="#">객관식 문제</a>
              <a href="#">주관식 문제</a>
            </div>
          </div>

          <button class="button">save</button>
      
        </div>
      
      
      
      </div>


    <!-- 주관식 컨테이너 요소 -->
    <div id="problemContainer"></div>
    <!-- 주관식 컨테이너 요소 끝 -->


            <!-- 객관식 문제 구역 -->
    <div id="problemContainer1"></div>
    
            <!-- 객관식 문제 구역 끝-->









    <div class="bottom_button-container">


            
        <!-- <button class="bottom_button">채점</button> -->
        <button id="writeButton" type="button" class="btn btn-outline-dark"
        style="width: 100px;">채점</button>
        

       
    
        <!-- <button class="bottom_button">제출</button> -->
        <button id="writeButton" type="button" class="btn btn-outline-dark"
        style="width: 100px;">제출</button>
       
    </div>


    <div class="result-container" style="display: flex; justify-content: center; align-items: center;
         ; position: relative; top: 0; left: 0; width: 100%; z-index: 9999; pointer-events: none;">
            <!-- 실제 문구가 들어갈 위치 -->
            <div class="result-message" style="display: none; color: red; margin-top: 3%;">3/2정도 맞았습니다.</div>
        </div>
  



        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.min.js"></script>

        <!-- AI서버에서 받은 데이터를 html에 받아옴 -->
<script>
    const data5 = localStorage.getItem('make_q_2_result');
const data6 = localStorage.getItem('make_q_result');

console.log(data5);
console.log(data6);

// JSON 문자열을 JavaScript 객체로 변환
if (data5 !== undefined && data6 !== undefined) {
    const judata = JSON.parse(data6);
    const gakdata = JSON.parse(data5);


    console.log(judata);
    console.log(gakdata);

    const juquestion = judata.question;
    const juanswer = judata.correct_answer;
    const gakquestion = gakdata.question;
    const gakanswer = gakdata.correct_answer;

    const opA = gakdata.A;
    const opB = gakdata.B;
    const opC = gakdata.C;
    const opD = gakdata.D;

    console.log(juquestion);
    console.log(juanswer);
    console.log(gakquestion);  // 수정된 부분
    console.log(gakanswer);
    console.log(opA);
    console.log(opB);
    console.log(opC);
    console.log(opD);

    // 데이터를 기반으로 문제를 추가
    addProblem(juquestion, juanswer, 1);
    addProblem1(gakquestion, gakanswer, opA, opB, opC, opD, 2); 
} else {
    console.log("데이터가 없음");
}



// 주관식 문제 표시 함수
function addProblem(question, answer, index) {
    const problemDiv = document.createElement('div');
    problemDiv.style.position = 'relative';
    problemDiv.style.bottom = '50px';
    problemDiv.className = 'problem_container';
   

    problemDiv.innerHTML = `
        <div class="col-sm-5 box">
            <h2 style="font-weight: 700;">${index}.</h2>
            <div class="card text-center shadow-sm h-100" style="margin-top: 20px;">
                <div style="align-items: center;">
                </div>
                <div class="card-body" style="margin-top: 80px;">
                    <p class="text-muted" style="position: relative; bottom: 30px;">${question}</p>
                    <div class="card-title">
                    </div>
                </div>
            </div>
        </div>
        <div class="col-sm-5 box">
            <div class="card text-center shadow-sm h-100" style="margin-top: 20px;">
                <div class="card-body">
                    <input class="text-muted" style="text-align: center; border: 3px solid black; width: 60%; height: 60px;" placeholder="답을 적으세요">
                </div>
            </div>
            <button id="toggleButton${index}">해설 보기</button>
            <div id="hiddenDiv${index}" style="display: none;">${answer}</div>
        </div>
    `;

    document.getElementById('problemContainer').appendChild(problemDiv);
  

    const toggleButton = document.getElementById(`toggleButton${index}`);
    const hiddenDiv = document.getElementById(`hiddenDiv${index}`);
    toggleButton.style.borderRadius = '10px';
    toggleButton.style.backgroundColor = '#aaf1ff';
    toggleButton.addEventListener('click', function() {
        if (hiddenDiv.style.display === 'none') {
            hiddenDiv.style.display = 'block';
            toggleButton.textContent = '해설 숨기기';
        } else {
            hiddenDiv.style.display = 'none';
            toggleButton.textContent = '해설 보기';
        }
    });
}



// 객관식 문제 표시 함수
function addProblem1(question, answer, A, B, C, D, index, num) {
    const problemDiv1 = document.createElement('div');
    problemDiv1.style.position = 'relative';
    problemDiv1.style.bottom = '50px';
    problemDiv1.className = 'problem_container1';
    
     problemDiv1.style.marginTop='60px'

    problemDiv1.innerHTML = ` 
        <div class="col-sm-5 box">
            <h2 style="font-weight: 700;">${index}.</h2>
            <div class="card text-center shadow-sm h-100">
              
            
                <div class="card-body" style="margin-top: 80px;">
                    <p class="text-muted" style="position: relative; bottom: 25px;">${question}</p>
                    <div class="card-title">
                       
                    </div>
                </div>
            </div>
        </div>
        <form>
            <div class="option-container">
                <div class="option">
                    <input type="radio" id="circle1" name="${index}" value="1">
                    <label class="circle" for="circle1"></label>
                    <div class="number"> A - ${A}</div>
                </div>
                <div class="option">
                    <input type="radio" id="circle2" name="${index}" value="2">
                    <label class="circle" for="circle2"></label>
                    <div class="number">B - ${B}</div>
                </div>
                <div class="option">
                    <input type="radio" id="circle3" name="${index}" value="3">
                    <label class="circle" for="circle3"></label>
                    <div class="number"> C - ${C}</div>
                </div>
                <div class="option">
                    <input type="radio" id="circle4" name="${index}" value="4">
                    <label class="circle" for="circle4"></label>
                    <div class="number"> D - ${D}</div>
                      
                       
                </div>
                 
            </div>
           
               
            
        </form>

         <button id="toggleButton${index}">해설 보기</button>
         <div id="hiddenDiv${index}" style="display: none;">${answer}</div>

       
    `;

    document.getElementById('problemContainer1').appendChild(problemDiv1);

    const toggleButton = document.getElementById(`toggleButton${index}`);
    const hiddenDiv = document.getElementById(`hiddenDiv${index}`);
    toggleButton.style.borderRadius = '10px';
    toggleButton.style.backgroundColor = '#aaf1ff';
    toggleButton.style.position='relative'
    toggleButton.style.left='12vw'
    toggleButton.addEventListener('click', function() {
        if (hiddenDiv.style.display === 'none') {
            hiddenDiv.style.display = 'block';
            hiddenDiv.style.position='relative'
            hiddenDiv.style.right='5px'
            toggleButton.textContent = '해설 숨기기';
        } else {
            hiddenDiv.style.display = 'none';
            toggleButton.textContent = '해설 보기';
        }
    });
}










// 채점 버튼 누르면 문구가 표시되도록 하는 함수. 
     const scoreButton = document.querySelector('.bottom_button-container button:first-of-type');
     const resultMessage = document.querySelector('.result-message');
     const resultContainer = document.querySelector('.result-container')

     let isScored = false;
     scoreButton.addEventListener('click', () => {
         if (!isScored) {
             resultMessage.style.display = 'block';
             isScored = true;
             // 문구가 나타날 때 웹페이지가 해당 메시지 위치로 자동으로 스크롤되도록 함
             resultContainer.scrollIntoView({ behavior: 'smooth', block: 'center' });
         } else {
             resultMessage.style.display = 'none';
             isScored = false;
         }
     });
    </script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
    
    
    </body>
</html>

